### search_filters = {FOCUS_FILTER_POLITICAL}
### search_filters = {FOCUS_FILTER_RESEARCH}
### search_filters = {FOCUS_FILTER_INDUSTRY}
### search_filters = {FOCUS_FILTER_STABILITY}
### search_filters = {FOCUS_FILTER_WAR_SUPPORT}
### search_filters = {FOCUS_FILTER_MANPOWER}
### search_filters = {FOCUS_FILTER_ANNEXATION}
### search_filters = {FOCUS_FILTER_SOV_POLITICAL_PARANOIA}
### search_filters = {FOCUS_FILTER_PROPAGANDA}
### search_filters = {FOCUS_FILTER_ARMY_XP}
### search_filters = {FOCUS_FILTER_NAVY_XP}
### search_filters = {FOCUS_FILTER_AIR_XP}
# Reminder that focus filters prio has to be handled in the generic focus file :)

focus_tree = {
	id = soviet_focus_rework_troika

	country = {
		factor = 0
		
		modifier = {
			add = 100
			tag = SOV
		}
	}
	
	default = no

	continuous_focus_position = { x = 55 y = 2000 }
	
	focus = {
		id = SOV_death_of_kamenev
		icon = GFX_SOV_death_of_kamenev
		x = 10
		y = 0
		cost = 10
		ai_will_do = {
			factor = 6
		}
		allowed = {
		    custom_trigger_tooltip = {
                tooltip = SOV_rework_troika_unlocked_by_event_ctt		
                always = no
		    }
		}
		search_filters = { FOCUS_FILTER_POLITICAL }
		completion_reward = {
			add_political_power = -200
		}
	}
	
	focus = {
		id = SOV_establish_the_troika
		icon = GFX_focus_generic_military_dictatorship
		relative_position_id = SOV_death_of_kamenev
		x = 0
		y = 1
		cost = 10
		ai_will_do = {
			factor = 6
		}
		allowed = {
		    custom_trigger_tooltip = {
                tooltip = SOV_rework_troika_unlocked_by_event_ctt		
                always = no
		    }
		}
		search_filters = { FOCUS_FILTER_POLITICAL }
		prerequisite = {
			focus = SOV_death_of_kamenev
		}
		completion_reward = {
			add_ideas = SOV_establishing_the_troika
		}
	}
	
	focus = {
		id = SOV_it_is_clear_to_us
		icon = GFX_SOV_it_is_clear_to_us
		relative_position_id = SOV_establish_the_troika
		x = -2
		y = 1
		cost = 10
		ai_will_do = {
			factor = 6
		}
		allowed = {
		    custom_trigger_tooltip = {
                tooltip = SOV_rework_troika_unlocked_by_event_ctt		
                always = no
		    }
		}
		search_filters = { FOCUS_FILTER_POLITICAL }
		prerequisite = {
			focus = SOV_establish_the_troika
		}
		completion_reward = {
			
		}
	}
	
	focus = {
		id = SOV_the_only_path_that_is_viable
		icon = GFX_focus_generic_soviet_politics
		relative_position_id = SOV_establish_the_troika
		x = 0
		y = 1
		cost = 10
		ai_will_do = {
			factor = 6
		}
		allowed = {
		    custom_trigger_tooltip = {
                tooltip = SOV_rework_troika_unlocked_by_event_ctt		
                always = no
		    }
		}
		search_filters = { FOCUS_FILTER_POLITICAL }
		#available = {
		#	has_completed_focus = SOV_it_is_clear_to_us
		#}
		prerequisite = {
			focus = SOV_establish_the_troika
		}
		completion_reward = {
			
		}
	}
	
	focus = {
		id = SOV_for_the_survival_of_the_union
		icon = GFX_focus_CHL_union_of_hispanic_republics
		relative_position_id = SOV_establish_the_troika
		x = 2
		y = 1
		cost = 10
		ai_will_do = {
			factor = 6
		}
		trigger = {
		    custom_trigger_tooltip = {
                tooltip = SOV_rework_troika_unlocked_by_event_ctt		
                always = no
		    }
		}
		search_filters = { FOCUS_FILTER_POLITICAL }
		#available = {
		#	has_completed_focus = SOV_the_only_path_that_is_viable
		#}
		prerequisite = {
			focus = SOV_establish_the_troika
		}
		completion_reward = {
			
		}
	}
	
	focus = {
		id = SOV_is_the_path_of
		icon = GFX_focus_generic_full_social_mobilization
		relative_position_id = SOV_for_the_survival_of_the_union
		x = -2
		y = 1
		cost = 10
		ai_will_do = {
			factor = 6
		}
		allowed = {
		    custom_trigger_tooltip = {
                tooltip = SOV_rework_troika_unlocked_by_event_ctt		
                always = no
		    }
		}
		search_filters = { FOCUS_FILTER_POLITICAL }
		prerequisite = {
			focus = SOV_it_is_clear_to_us
		}
		prerequisite = {
			focus = SOV_the_only_path_that_is_viable
		}
		prerequisite = {
			focus = SOV_for_the_survival_of_the_union
		}
		completion_reward = {
			
		}
	}
	
####### TROTSSSSSS ######
	
	focus = {
		id = SOV_the_admiral
		icon = GFX_focus_fra_loyalty_trotzky
		relative_position_id = SOV_is_the_path_of
		x = -8
		y = 1
		cost = 10
		ai_will_do = {
			factor = 6
		}
		mutually_exclusive = { focus = SOV_the_secretary }
		mutually_exclusive = { focus = SOV_the_president }
		allowed = {
		    custom_trigger_tooltip = {
                tooltip = SOV_rework_troika_unlocked_by_event_ctt		
                always = no
		    }
		}
		search_filters = { FOCUS_FILTER_POLITICAL }
		prerequisite = {
			focus = SOV_is_the_path_of
		}
		completion_reward = {
			swap_ideas = {
                remove_idea = SOV_establishing_the_troika
                add_idea = SOV_admiral_trotsky
            }
		}
	}
	
####### Trot-Stalin shared######

    focus = {
		id = SOV_additional_funding_to_the_red_army
		icon = GFX_
		relative_position_id = SOV_the_secretary
		x = -4
		y = 1
		cost = 10
		ai_will_do = {
			factor = 6
		}
		allowed = {
		    
		}
		search_filters = { FOCUS_FILTER_POLITICAL }
		prerequisite = {
			focus = SOV_the_secretary
			focus = SOV_the_admiral
		}
		completion_reward = {
			
		}
	}
	
	focus = {
		id = SOV_the_new_generation_of_commissars
		icon = GFX_
		relative_position_id = SOV_additional_funding_to_the_red_army
		x = 0
		y = 2
		cost = 10
		ai_will_do = {
			factor = 6
		}
		allowed = {
		    
		}
		search_filters = { FOCUS_FILTER_POLITICAL }
		prerequisite = {
			focus = SOV_additional_funding_to_the_red_army
		}
		completion_reward = {
			
		}
	}
	
	focus = {
		id = SOV_dismiss_the_gang_of_four
		icon = GFX_
		relative_position_id = SOV_the_new_generation_of_commissars
		x = 0
		y = 2
		cost = 10
		ai_will_do = {
			factor = 6
		}
		allowed = {
		    
		}
		search_filters = { FOCUS_FILTER_POLITICAL }
		prerequisite = {
			focus = SOV_the_new_generation_of_commissars
		}
		completion_reward = {
			
		}
	}
	
####### Stalin ######
	
	focus = {
		id = SOV_the_secretary
		icon = GFX_focus_fra_loyalty_stalin
		relative_position_id = SOV_is_the_path_of
		x = 0
		y = 1
		cost = 10
		ai_will_do = {
			factor = 6
		}
		mutually_exclusive = { focus = SOV_the_admiral }
		mutually_exclusive = { focus = SOV_the_president }
		allowed = {
		    custom_trigger_tooltip = {
                tooltip = SOV_rework_troika_unlocked_by_event_ctt		
                always = no
		    }
		}
		search_filters = { FOCUS_FILTER_POLITICAL }
		prerequisite = {
			focus = SOV_is_the_path_of
		}
		completion_reward = {
			swap_ideas = {
                remove_idea = SOV_establishing_the_troika
                add_idea = SOV_general_secretary_stalin
            }
		}
	}
	
	focus = {
		id = SOV_the_troika_centre
		icon = GFX_focus_fra_loyalty_stalin
		relative_position_id = SOV_the_secretary
		x = 0
		y = 1
		cost = 10
		ai_will_do = {
			factor = 6
		}
		allowed = {
		    
		}
		search_filters = { FOCUS_FILTER_POLITICAL }
		prerequisite = {
			focus = SOV_the_secretary
		}
		completion_reward = {
			
		}
	}
	
	focus = {
		id = SOV_keep_up_the_good_work
		icon = GFX_focus_por_workers_of_iberia
		relative_position_id = SOV_the_troika_centre
		x = -1
		y = 1
		cost = 10
		ai_will_do = {
			factor = 6
		}
		allowed = {
		    
		}
		search_filters = { FOCUS_FILTER_POLITICAL }
		prerequisite = {
			focus = SOV_the_troika_centre
		}
		completion_reward = {
			add_ideas = SOV_new_stability
		}
	}
	
	focus = {
		id = SOV_new_industrial_programme
		icon = GFX_focus_generic_communist_industry
		relative_position_id = SOV_keep_up_the_good_work
		x = 0
		y = 1
		cost = 10
		ai_will_do = {
			factor = 6
		}
		allowed = {
		    
		}
		search_filters = { FOCUS_FILTER_POLITICAL }
		prerequisite = {
			focus = SOV_keep_up_the_good_work
		}
		completion_reward = {
			custom_tooltip = SOV_new_industrial_programme_tt
		}
	}
	
	focus = {
		id = SOV_form_the_ministry_of_intelligence
		icon = GFX_goal_generic_intelligence_exchange
		relative_position_id = SOV_the_troika_centre
		x = 1
		y = 1
		cost = 10
		ai_will_do = {
			factor = 6
		}
		allowed = {
		    
		}
		search_filters = { FOCUS_FILTER_POLITICAL }
		prerequisite = {
			focus = SOV_the_troika_centre
		}
		completion_reward = {
		    if = { 
			    limit = {
				    has_intelligence_agency = no
				}
				create_intelligence_agency = {
                    name = "NKVD"
                    icon = GFX_agency_logo_sov
                }
			}
			else = {
			    limit = {
				    has_intelligence_agency =  yes
				}
				upgrade_intelligence_agency = upgrade_form_department
			}
			add_ideas = SOV_ministry_of_intelligence
		}
	}
	
	focus = {
		id = SOV_the_bukharinite_kollontite_terrorist_left
		icon = GFX_focus_SOV_bukharan_republic
		relative_position_id = SOV_form_the_ministry_of_intelligence
		x = 0
		y = 1
		cost = 10
		ai_will_do = {
			factor = 6
		}
		allowed = {
		    
		}
		search_filters = { FOCUS_FILTER_POLITICAL }
		prerequisite = {
			focus = SOV_form_the_ministry_of_intelligence
		}
		completion_reward = {
			
		}
	}
	
	focus = {
		id = SOV_set_a_trap
		icon = GFX_focus_ARG_centralize_power
		relative_position_id = SOV_the_bukharinite_kollontite_terrorist_left
		x = -1
		y = 1
		cost = 10
		ai_will_do = {
			factor = 6
		}
		allowed = {
		    
		}
		search_filters = { FOCUS_FILTER_POLITICAL }
		prerequisite = {
			focus = SOV_the_bukharinite_kollontite_terrorist_left
		}
		prerequisite = {
			focus = SOV_new_industrial_programme
		}
		completion_reward = {
			
		}
	}
	
	focus = {
		id = SOV_trial_of_the_workers_opposition
		icon = GFX_focus_SOV_purge_bukharinists
		relative_position_id = SOV_set_a_trap
		x = 0
		y = 1
		cost = 10
		ai_will_do = {
			factor = 6
		}
		allowed = {
		    
		}
		search_filters = { FOCUS_FILTER_POLITICAL }
		prerequisite = {
			focus = SOV_set_a_trap
		}
		completion_reward = {
			
		}
	}
	
####### Zinoviev-Stalin shared######
	
	focus = {
		id = SOV_additional_funding_to_the_communist_international
		icon = GFX_
		relative_position_id = SOV_the_secretary
		x = 4
		y = 1
		cost = 10
		ai_will_do = {
			factor = 6
		}
		allowed = {
		    
		}
		search_filters = { FOCUS_FILTER_POLITICAL }
		prerequisite = {
			focus = SOV_the_secretary
			focus = SOV_the_president
		}
		completion_reward = {
			
		}
	}
	
	focus = {
		id = SOV_support_gramsci_and_bordiga_against_togliatto_and_tasca
		icon = GFX_
		relative_position_id = SOV_additional_funding_to_the_communist_international
		x = 0
		y = 2
		cost = 10
		ai_will_do = {
			factor = 6
		}
		allowed = {
		    
		}
		search_filters = { FOCUS_FILTER_POLITICAL }
		prerequisite = {
			focus = SOV_additional_funding_to_the_communist_international
		}
		completion_reward = {
			
		}
	}
	
	focus = {
		id = SOV_back_on_the_world_stage
		icon = GFX_
		relative_position_id = SOV_support_gramsci_and_bordiga_against_togliatto_and_tasca
		x = 0
		y = 2
		cost = 10
		ai_will_do = {
			factor = 6
		}
		allowed = {
		    
		}
		search_filters = { FOCUS_FILTER_POLITICAL }
		prerequisite = {
			focus = SOV_support_gramsci_and_bordiga_against_togliatto_and_tasca
		}
		completion_reward = {
			
		}
	}
	
####### Zinoviev ######
	
	focus = {
		id = SOV_the_president
		icon = GFX_focus_SOV_zinovyevists
		relative_position_id = SOV_is_the_path_of
		x = 8
		y = 1
		cost = 10
		ai_will_do = {
			factor = 6
		}
		mutually_exclusive = { focus = SOV_the_admiral }
		mutually_exclusive = { focus = SOV_the_secretary }
		allowed = {
		    custom_trigger_tooltip = {
                tooltip = SOV_rework_troika_unlocked_by_event_ctt		
                always = no
		    }
		}
		search_filters = { FOCUS_FILTER_POLITICAL }
		prerequisite = {
			focus = SOV_is_the_path_of
		}
		completion_reward = {
			swap_ideas = {
                remove_idea = SOV_establishing_the_troika
                add_idea = SOV_president_zinoviev
            }
		}
	}
}